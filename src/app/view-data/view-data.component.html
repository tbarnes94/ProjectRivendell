<script src="jquery.tabletoCSV.js"></script>

<button (click)="openColumnDialog()">Hide/Show Columns</button>
<table id="myTable2" border="1" *ngIf='entities && entities.length'>
  <thead>
    <tr>
      <ng-container *ngFor="let field of entityFields">
        <th  *ngIf="hiddenFields[field] != true" class="table-header-color text-centered">
          <button md-button class="table-header-color text-centered">{{field}}</button>
        </th>
      </ng-container>
      <th *ngFor="let number of [-1, 0, 1, 2, 3, 4]" class="table-header-color">
        <button md-button class="table-header-color text-centered">{{months[today.getMonth() + number]}}, {{today.getFullYear()}}</button>
      </th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor='let entity of entities'>
      <ng-container *ngFor="let field of entityFields">
        <td *ngIf="hiddenFields[field] != true" class="text-centered">{{ entity[field]}}</td>
      </ng-container>
        <!-- Forecasts -->
      <td *ngFor="let number of [-1, 0, 1, 2, 3, 4]" class="text-centered">
        ${{findValueWithMonthOffset(entity, number)}}
      </td>
  </tbody>
</table>

<button (click)="openDialog(40);">lol</button>